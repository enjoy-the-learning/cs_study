# 질문은 뭐할까

1. 각 계층마다의 대표적인 장치는 뭐가 있슴니까?
2. 스위치, 브릿지의 차이가 무엇이고 각각 어떤 특징이 있습니까
3. 데이터링크(2)계층의 흐름제어 방식에는 어떤 것이 있고 무엇입니까?
4. TCP/UDP와의 차이는 무엇이고 각각은 어떤 특징이 있습니까?
5. 응용계층의 프로토콜에는 어떤 것이 있으며, 각각의 의미,특징은 뭡니까.

# 네트워크의 꽃, 정수. OSI 7계층.

### 1. OSI 모델이란?

OSI 모델은 **국제표준화기구(ISO)**에서 만든 **네트워크 통신을 위한 참조 모델로**

OSI는 **Open Systems Interconnection**의 약자로, 컴퓨터 시스템 간 통신을 7단계로 나누어 놨음.

![image.png](attachment:2c2850fe-2450-4e24-bcac-046695669364:image.png)

- 왜 나눴냐?
    
    → **복잡한 네트워크 통신 과정을 계층별로 나눠서 이해, 설계, 구현을 쉽게 하려고**
    

![image.png](attachment:3b1721a9-d0ca-406f-9819-0f2fb5bbef0c:image.png)

### 1. 물리계층

컴퓨터는 0과 1만을 처리할 수 있기 때문에, 네트워크를 통해 0과 1의 비트를 전기적 신호로 바꿔서 전송하는 역할을 하는 게 물리계층임.

물리계층에서는 단지 데이터를 전달만 하고 전송하려는 데이터가 무엇인지, 어떤 에러가 있는지 등에는 신경 안쓰는 게 특징임.

즉, 물리계층은 전송할 데이터를 0과 1의 비트로 바꾸고 → 이를 전기적 신호/광 신호/ 무선 신호로 바꿔서 전송함

“신호가 제대로 가느냐 안 가느냐”를 책임지는 계층

요 계층에서는 대표적으로 허브나 리피터, 케이블같은 장치가 대표적임.

![image.png](attachment:4afb668f-f40f-4970-a640-0bebb6f054c1:image.png)

![image.png](attachment:608d0620-68bd-49dc-b6fe-a9da110a26d7:image.png)

예를들어 케이블 선 빠졌어요 ㅠㅠ →  물리계층에서 신호 자체가 전달 안되기 때문

### 2. 데이터 링크 계층

물리계층에서 전송된 비트를 프레임 단위로 묶에서 전송하는 역할,

가장 큰 특징은 오류 감지, 흐름 제어, MAC주소 기반 통신을 수행함.

슬슬 이 계층에서부터는 **데이터 전송 신뢰성**을 어느정도 보장하기 시작함.

즉, 물리계층을 통해 송수신되는 정보의 오류와 흐름을 관리하여 안전한 정보의 전달을 수행할 수 있도록 도와주는 역할을 함.

그래서 통신에서의 오류도 찾아주고 재전송도하는 기능도 가능함.

데이터 링크 계층에서는 MAC주소를 가지고 통신하게 됨.

여기서는 전송되는 단위를 프레임이라고 하고, 대표적으로 브리지, 스위치같은 장치가 있음. 

![
• Preamble (물리 계층의 헤더) : 송신자와 수신자의 동기화를 위해 사용](attachment:51ae8b3b-03cc-4e95-9f9a-eab209cd1423:image.png)

• Preamble (물리 계층의 헤더) : 송신자와 수신자의 동기화를 위해 사용

즉, 브리지나 스위치를 통해 맥주소를 가지고 물리계층에서 받은 정보를 전달함.

- 브리지, 스위치가 몬데용?
    
    # 2계층(데이터 링크 계층) - 브리지, 스위치
    
    ![](https://velog.velcdn.com/images/yooha9621/post/c2771c31-6944-412b-9662-5343c14cc64b/image.png)
    
    - **1. 브리지(Bridge)**
        - 네트워크 세그먼트를 서로 연결해 주는 장치
            - 세그먼트 : 하나의 큰 네트워크를 구성하는 작은 네트워크들,이 세그먼트를 연결해주는 것이 브리지, 스위치 등 같은 장비들이 있다.
        - **브리지의 5가지의 기능**
            - **1) Learning : 학습**
                - A라는 호스트가 데이터를 보내면 A의 맥 어드레스를 브리지의 맥 어드레스 테이블에 저장
                - 브리지는 맥 어드레스 테이블을 참고하여 전송 여부를 결정 : 다른 호스트에서 A라는 호스트에 데이터를 전송할 때
            - **2) Flooding**
                - 목적지 정보가 맥 어드레스 테이블에 없다면 모든 포트로 똑같은 데이터를 전송한다.
            - **3) Forwarding : 목적지 정보가 맥 어드레스 테이블에 있다면 해당 포트로 데이터를 전송한다.없으면 Flooding.**
            - **4) Filtering : 브리지를 건너지 못하게 하는 기능**
                - 허브와 다르게 콜리전 도메인을 나눌 수 있다.
                - A와 B호스트가 같은 세그먼트, C와 D호스트가 또 다른 세그먼트라고 가정.
                    - A호스트가 B호스트와 통신을 하려고 데이터를 보내는 경우
                        - 브리지는 맥 어드레스 테이블에서 B호스트의 정보를 확인
                        - A와 B호스트는 같은 세그먼트에 있음
                        - 브리지는 C,D호스트가 있는 세그먼트로 가는 다리를 차단한다.
                        - 이러한 기능때문에 허브와 다르게 콜리전 도메인을 나눌 수 있다.
            - **5) Aging**
                - 테이블에 저장된 맥 주소를 계속 유지하는 것이 아님.
                - 300초가 지나도록 해당 맥 주소를 가진 프레임이 들어오지 않으면 테이블에서 자동으로 삭제된다.
    
    - **2. 스위치(Switch)**
        - **브리지와의 차이점**
            - 처리방식
                - 스위치 : 하드웨어 방식
                - 브리지 : 소프트웨어 방식
            - 속도 : 스위치가 훨씬 빠르다.
            - 포트 수 : 스위치가 많음.
                - 스위치는 포트 별로 속도를 지정할 수 있다.
        - 브리지의 상위 호환 장비이므로 브리지는 현재 사용되진 않는다.
        - **스위치를 계층별로 분류한다.**
            
            ![](https://velog.velcdn.com/images/yooha9621/post/11084cc0-c603-4c07-9936-934a460dd332/image.png)
            
            - **1) L2 스위치**
                - 가장 기본적인 스위치
                - 데이터 링크 계층에서 동작
                - 맥 주소를 기반으로 패킷을 전달
                - 다른 스위치에 비해 가격이 저렴하다는 장점
            - **2) L3 스위치**
                - L2 스위치에 라우팅 기능이 추가된 장비
                - IP 정보를 보고 스위칭
                - 기능적으로 보면 라우터랑 차이가 거의 없음
                - 라우터는 소프트웨어 방식이라 속도면에서 하드웨어 방식인 L3 스위치가 훨씬 빠르고, 가격도 저렴
                - 그렇다면 라우터를 쓰는 이유가 없지 않냐고 할 수도 있는데, 제품에 따라 지원하는 기능이 다르기 때문에 용도에 맞게 사용하면 된다.
            - **3) L4 스위치**
                - 4계층 프로토콜인 TCP/UDP를 이용
                - IP와 PORT 기반으로 스위칭
                - L4 스위치에서는 부하 분산(Load Balancing) 기능을 제공
                - 많은 양의 트래픽을 여러 서버로 분산시켜주는 기능
            - **3) L7 스위치**
                - L4 스위치와 기능과 역할이 동일하다.
                - L7 스위치에서는 추가로 페이로드를 분석하여 패킷을 처리
                - 페이로드를 분석함으로써 Dos나 SYN Attack 등 네트워크 공격에 대해 방어가 가능
                - 특정 바이러스 감염 패킷을 필터링할 수 있다.
                - L7 스위치를 투입하면서 네트워크 보안 강화에 힘을 실어줄 순 있지만 가격이 비싸다는 단점이 있다.

데이터 링크 계층은 **Point-to-Point**간 신뢰성있는 전송을 보장하기 위한 계층으로,

CRC기반의 오류 제어와 흐름 제어가 필요함.

→Cyclic Redundancy Check (순환 중복 검사)

뜬금포로 CRC기반 오류제어를 알아보자면 데이터를 전송 할 때 오류가 생겼는지 검출하기 위한 코드임.
CRC는 오류를 ‘검출’만 할 수 있고, **오류를 ‘수정’하지는 못함.** 오류가 감지되면 해당 프레임을 폐기하거나 상위 계층에서 재전송을 요청함.

1. 송신측에서 데이터에 어떠한 수학적 계산(CRC 연산)을 해서 Checksum을 붙임 → 이걸 CRC 코드라 함.
2. 수신 측은 받은 데이터에 대해 같은 방식으로 CRC 계산을 다시 함.
3. 송신측 ←→ 수신 측 CRC값이 다르면 오류 발생한것임. ( 재요청하거나 데이터 버리기)

그럼 흐름제어는 뭐냐

단순하게 보내는 속도와 받는 속다가 맞지 않아서 생기는 문제를 조절하는 기술

ex) 너무 빠르게 보내면 수신측이 **버퍼 오버플로우로 데이터를 놓칠 수 있음. → 속도조절이 필요**

흐름제어 방식에는 대표적으로 두가지 방법이 있음.

1. Stop-and-Wait 방식
    
    말 그대로 한번에 하나씩 보내고 ACK(응답신호) 받으면 다음 것 전송하는거 → 좀 느리긴 함 비효율적
    
    ![image.png](attachment:374a79bb-059b-40c8-931e-756005c0cc76:image.png)
    
2. Sliding Window 방식
    
    여러개를 연속으로 보내는데~~~ ACK오면 창을 슬라이딩 하여 다음 전송 → 효율적이고 빠름
    
    근데 무한대로 사이즈를 설정할 수 있는 게 아니라, 동시에 보낼 수 있는 사이즈가 정해져 있고 이 사이즈를 윈도우라고 함,
    
    ex) 아래 그림과 같은 경우엔 윈도우 사이즈가 7이며, 0~6까지 7개의 데이터를 보냈고 ACK 2 ( 2 전까진 잘 받았습니다~) 가 날라오면 2칸을 늘리는 방식 → 슬라이딩 했다.
    
    ![image.png](attachment:cc9bcc80-e3c5-4beb-bf49-792087576e3f:image.png)
    

이처럼 데이터 링크 계층은 네트워크 위에 개체들 간 데이터를 전달하고, 물리 계층에서 발생 할 수 있는 오류를 찾아내고, 수정하는데 필요한 기능적, 절차적 수단을 제공함.

### 3. 네트워크 계층

→ 이 계층에서 가장 중요한 기능은 데이터를 목적지까지 안전하고 빠르게 전달하는 기능 즉, 라우팅임.

이 계층에서는 경로를 선택하고 주소를 정하고, 경로에 따라 패킷을 전달해주는 것이 네트워크 계층의 역할.

대표적인 장비는 라우터이고, 2계층(데이터링크)에서 스위치 장비에 라우팅 기능을 장착한 Layer3 스위치도 있음.

(위 브리지,스위치가 몬데용? 토글버튼을 참고)

네트워크 계층에서는 대표적인 프로토콜로 IP가 있음. so, IP주소를 사용하여 통신함.

![image.png](attachment:70679972-d53a-463e-ace9-7f4bd5faaf60:image.png)

네트워크 계층은 라우팅, 흐름 제어, 세그멘테이션(segmentation/desegmentation), 오류 제어, 인터네트워킹(Internetworking) 등을 수행함.

즉, 데이터를! 연결하는 다른 네트워크를 통해 전달함으로써! 인터넷이 가능하게 만드는 계층이다.

논리적인 주소 구조(IP), 곧 네트워크 관리자가 직접 주소를 할당하는 구조를 가지며, 계층적(hierarchical)이다.

### 4. 전송계층

통신을 활성화하기 위한 계층. 보통 TCP프로토콜을 이용하며,

포트를 열어서 응용프로그램들이 전송을 할 수 있게 함.

만약 데이터가 왔다면 4계층에서 해당 데이터를 하나로 합쳐서 5계층에 던져 줌!

![image.png](attachment:13130b6c-19e9-4657-9893-77f0860fb377:image.png)

전송 계층(Transport layer)은 양 끝단(End to end)의 사용자들이 신뢰성있는 데이터를 주고 받을 수 있도록 해 주어,

상위 계층들이 데이터 전달의 유효성이나 효율성을 생각하지 않도록 해줌.

시퀀스 넘버 기반의 오류 제어 방식을 사용한다.

전송 계층은 특정 연결의 유효성을 제어하고, 일부 프로토콜은 상태 개념이 있고(stateful),

**연결 기반(connection oriented)임.**

이는 **전송 계층이 패킷들의 전송이 유효한지 확인하고 전송 실패한 패킷들을 다시 전송한다는 것**을 뜻함.

가장 잘 알려진 전송 계층의 예는 TCP

종단간(end-to-end) 통신을 다루는 최하위 계층으로 종단간 신뢰성 있고 효율적인 데이터를 전송하며,

기능은 오류검출 및 복구와 흐름제어, 중복검사 등을 수행함.

TCP/UDP는 중요하니 한번 짚고 가자면,

1. **TCP 프로토콜(Transmission Control Protocol)**
    
    OSI 계층모델의 관점에서 전송 계층(4계층)에 해당
    
    양종단 호스트 내 프로세스 상호 간에 신뢰적인 연결지향성 서비스를 제공
    
    - IP의 비신뢰적인 최선형 서비스에다가 신뢰적인 연결지향성 서비스를 제공하게 됨
    
    . **신뢰적인 전송을 보장**함으로써, 어플리케이션 구현이 한층 쉬워지게 됨
    
    **1. 신뢰성 있음 (Reliable)**
    
    패킷 손실, 중복, 순서바뀜 등이 없도록 보장
    
    TCP 하위계층인 IP 계층의 신뢰성 없는 서비스에 대해 다방면으로 신뢰성을 제공
    
    **2. 연결지향적 (Connection-oriented)**
    
    같은 전송계층의 UDP가 비연결성(connectionless)인 것과는 달리, TCP는 연결지향적 임
    
    이 경우, 느슨한 연결(Loosly Connected)을 갖으므로 강한 연결을 의미하는
    
    가상회선이라는 표현 보다는 오히려 연결지향적이라고 말함
    
    연결 관리를 위한 연결설정 및 연결해제 필요
    
    양단간 어플리케이션/프로세스는 TCP가 제공하는 연결성 회선을 통하여 서로 통신
    
2. **UDP 프로토콜(User Datagram Protocol)**
    
    전송 계층의 통신 프로토콜의 하나 (TCP에 대비됨)
    
    - **신뢰성이 낮은 프로토콜**로써 완전성을 보증하지 않으나,
    - 가상회선을 굳이 확립할 필요가 없고 유연하며 효율적 응용의 데이터 전송에 사용
    
    **1. 비연결성이고, 신뢰성이 없으며, 순서화되지 않은 Datagram 서비스 제공**
    
    - 메세지가 제대로 도착했는지 확인하지 않음 (확인응답 없음)
    - 수신된 메세지의 순서를 맞추지 않음 (순서제어 없음)
    - 흐름 제어를 위한 피드백을 제공하지 않음 (흐름제어 없음)
    - 검사합을 제외한 특별한 오류 검출 및 제어 없음 (오류제어 거의 없음)
    
    UDP를 사용하는 프로그램 쪽에서 오류제어 기능을 스스로 갖추어야 함
    
    - 데이터그램 지향의 전송계층용 프로토콜 (논리적인 가상회선 연결이 필요없음)
    
    비연결접속상태 하에서 통신
    
    **2. 실시간 응용 및 멀티캐스팅 가능**
    
    - 빠른 요청과 응답이 필요한 실시간 응용에 적합
    - 여러 다수 지점에 전송 가능
    
    **3. 헤더가 단순함**
    
    - UDP는 TCP 처럼 16 비트의 포트 번호를 사용하나,
    - 헤더는 고정크기의 8 바이트(TCP는 20 바이트) 만 사용
    
    즉, 헤더 처리에 많은 시간과 노력을 요하지 않음
    
    ### [TCP/UDP 비교]
    
    | 항목 | TCP | UDP |
    | --- | --- | --- |
    | 연결 방식 | 연결 지향 (3-way handshaking) | 비연결 지향 |
    | 신뢰성 | 높음 (재전송, 흐름 제어 등) | 낮음 (손실 감수) |
    | 속도 | 상대적으로 느림 | 빠름 |
    | 사용 예시 | 웹, 이메일, 파일 전송 | 실시간 스트리밍, 게임, VoIP |
    
    ![image.png](attachment:53cf6317-3ef8-4731-8eed-cf7107407347:image.png)
    

### **5. 세션 계층(Session Layer)**

**데이터가 통신하기 위한 논리적인 연결**을 말함.

통신을 하기위한 대문이라고 보면 됨!

4계층에선 연결을 맺고 종료할 수 있기 때문에 우리가 어느 계층에서 통신이 끊어 졌나 판단하기는 한계있는디,

그러므로 세션 계층은 4 계층과 무관하게 응용 프로그램 관점에서 봐야 함.

`세션 설정`, `유지, 종료`, `전송 중단시 복구` 등의 기능이 있다.

세션 계층(Session layer)은 양 끝단의 응용 프로세스가 통신을 관리하기 위한 방법을 제공.

**동시 송수신 방식(duplex), 반이중 방식(half-duplex), 전이중 방식(Full Duplex)**의 통신과 함께, 체크 포인팅과 유휴, 종료, 다시 시작 과정 등을 수행함.

- 전이중, 반이중 방식이 뭔디?
    
    ### 1) 단방향(Simplex) 방식
    
    정보의 전송이 한 방향으로만 이루어지는 방식이다.
    
    송신측은 송신만 담당하고, 수신측은 수신만 담당함.
    
    ### 2) 반이중(Half-Duplex) 방식
    
    정보의 전송이 양 방향으로 이루어지나, 한쪽이 송신하는 동안은 다른 쪽이 송신하지 못하는 방식
    
    전송 방향을 바꾸기 위한 전송 반전 시간(Turn Around Time)이 필요함.
    
    전송 데이터가 적을 때 용이함.
    
    ### 3) 전이중(Full-Duplex) 방식
    
    정보의 전송이 양방향으로 이루어지고 양쪽 모두 동시에 송신이 가능한 방식
    
    전송 효율이 가장 우수.
    
    전송 데이터가 많을 때 용이.
    
    유선인 경우 4선 식으로 구성.
    
    이 계층은 **TCP/IP 세션을 만들고 없애는 책임**을 진다.
    

1. 한 방향으로만 통신하는 방법 → **단방향** 방식

2. 데이터를 전송하는 시간을 분리하여 전송하는 방법 → **반이중** 방식

3. 선을 두개 사용하여 공간적으로 분리하여 전송하는 방법 → **전이중** 방식

![image.png](attachment:3c7e3f35-ccc6-4753-bf66-3169d9b24092:image.png)

이어서 세션계층은 통신하는 사용자들을 동기화하고 오류복구 명령들을 일괄적으로 다룸.

또, 통신을 하기 위한 세션을 확립/유지/중단 가능.. (운영체제가 해줌 ㅎㅎ)

**6계층 - 표현 계층(Presentation Layer)**

데이터 표현이 상이한 응용 프로세스의 **독립성을 제공**하고, **암호화** 한다.

표현 계층(Presentation layer)은 코드 간의 번역을 담당하여,

 사용자 시스템에서 **데이터의 형식상 차이를 다루는 부담**을 응용 계층으로부터 덜어 줌.

ex) MIME 인코딩이나 암호화 등의 동작같은 것들

예를 들면, EBCDIC로 인코딩된 문서 파일을 ASCII로 인코딩된 파일로 바꿔 주는 것,

![image.png](attachment:100f6d20-7652-4771-a699-81d4ba9473dd:image.png)

해당 데이터가 TEXT인지, 그림인지, GIF인지 JPG인지의 구분 등이 표현 계층의 몫!!!

→ 사용자의 명령어를 완성및 결과 표현. 포장/압축/암호화

**7계층 - 응용 계층(Application Layer)**

응용 계층(Application Layer)은 OSI 7계층 모델의 최상위 계층(7계층)으로,

**사용자(또는 응용 프로그램)가 네트워크 서비스를 사용할 수 있도록 하는 계층**임. ex) 까까오톡

또한, 클라이언트 측 어플리케이션(웹 브라우저, 메일 프로그램 등)이 서버 측 어플리케이션(웹 서버 프로그램, 메일 서버 프로그램 등)과 통신하려면 응용 계층의 **프로토콜**을 사용해야 함.

최종 목적지로서 HTTP, FTP, SMTP, POP3, IMAP, Telnet 등과 같은 프로토콜이 있음.

(웹 사이트를 볼 때는 HTTP , 파일을 전송할 때는 FTP, 메일을 보낼 때는 SMTP, 메일을 받을 때는 POP3라는 프로토콜을 사용)

요 통신 패킷들은 방금 나열한 프로토콜에 의해 모두 처리되며 우리가 사용하는 브라우저나, 메일 프로그램은 프로토콜을보다 쉽게 사용하게 해주는 응용프로그램.

프로토콜은 각각 요 의미임.

> HTTP (HyperText Transfer Protocol):
> 
> 
> 웹 서비스에서 클라이언트(**웹 브라우저)와 웹 서버 간에 정보를 주고받기** 위해 사용되는 네트워크 프로토콜이다.
> 

> FTP(File Transfer Protocol, 파일 전송 프로토콜):
> 
> 
> 서버와 클라이언트 간에 **파일을 전송**하기 위한 프로토콜이다. 일반적으로 통신 포트는 제어 용도로는 21번을 사용하고 데이터 전송 용도로는 20번 포트를 사용한다.
> 

> SMTP(Simple Mail Transfer Protocol, 단순 메일 전송 프로토콜):
> 
> 
> 인터넷에서 **메일을 송신**하는 데 사용하는 프로토콜이다. 통신 포트는 일반적으로 25번을 사용한다. SMTP를 지원하는 서버를 SMTP 서버라고 한다.
> 

> POP3(Post Office Protocol version 3):
> 
> 
> 인터넷에서 **메일을 수신**하는 데 사용하는 프로토콜이다. 통신 포트는 일반적으로 110번을 사용한다. POP3를 지원하는 서버를 POP3 서버라고 한다.
> 

> DNS(Domain Name System, 도메인 이름 시스템):
> 
> 
> 네트워크에서 **호스트 이름을 IP 주소로 변환**하는 데 사용하는 시스템(서비스)이다. DNS 서비스가 동작하는 컴퓨터(서버)를 DNS 서버라고 한다.
> 

즉, 실제 네트워크 통신은 응용프로그램이 직접 처리하는 것이 아니라, 응용 계층의 프로토콜을 통해 이루어진다.

구래서 지금까지의 계층을 정리하자면 다음 사진과 같당.

![image.png](attachment:dc366539-66e0-408e-8cca-a7be10c0b075:image.png)

![image.png](attachment:10b9725a-9213-4a9b-b7f9-757c299ca518:image.png)